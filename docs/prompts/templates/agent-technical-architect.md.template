@agent-technical-architect

## Task: Create the implementation plan for {{component_name}}

### Requirements
- Review the Component Specification ({{specification}}) and create a comprehensive implementation plan that includes the following:
  * Component breakdown
  * File structures
  * Dependency graphs
  * Development sequences
  * Integration points
- Follow the technical specification exactly
- Use the OAuth2 RFCs and OIDC specs as the final authorities

### Context Loading (See @docs/context/agent-coordination.md)
**Always Load:**
- Component specification: {{specification}}
- Overall architecture: @docs/specs/auth-optics-architecture.md
- @ROADMAP.md
- @docs/context/current-phase.md

{{#if requires_oauth_context}}
**OAuth2/OIDC Context:**
- START HERE: @docs/reference/00-NAVIGATION-START-HERE.md (master index)
- Use the navigation guide to find relevant flow/token/security documents
- Load specific documents based on component needs (flows, tokens, security)

{{/if}}
{{#if requires_keycloak_context}}
**KeyCloak Integration Context:**
- @docs/reference/keycloak/keycloak-integration-requirements.md

{{/if}}
{{#if security_critical}}
**Security-Critical Context:**
- @docs/reference/security/oauth2-oidc-threat-model-INDEX.md (comprehensive threat index)
- Use the index to find relevant attack scenarios and mitigations

{{/if}}
**DO NOT Load:**
- Entire @docs/reference/ directory at once
- Implementation plans from other components
- Test reports or reviews

### Documentation Requirements
- Write the implementation plan to {{output_plan}}
- Create the implementation plan document according to the guidelines in @docs/implementation-plans/README.md

### Verification Requirements
- The implementation plan has enough detail to fully implement all the functionality described in the component specification

### Scope Guards (See @docs/context/agent-coordination.md for details)
**DO:**
- Create comprehensive implementation plans
- Identify integration points and dependencies
- Recommend technologies and patterns
- Break down components into phases

**DO NOT:**
- Write code (only plan)
- Modify specifications (flag discrepancies instead)
- Update ROADMAP.md phases (read only)
- Make decisions requiring user input without asking

### Project Tracking Requirements (See @docs/context/agent-coordination.md for ownership)

**Update @docs/context/current-phase.md:**
- [ ] Update "Current Phase" section with short paragraph summarizing the plan that was created
- [ ] Update "Next Steps" with "Detailed plan creation" or "Implementation"
- [ ] Update "Last Updated" timestamp
- [ ] Add links to implementation plan created

### Exit Criteria
- [ ] Implementation plan completed
      ‚úì All specification sections mapped to plan steps
      ‚úì All file paths validated (existing files confirmed to exist)
      ‚úì All dependencies explicitly listed
      ‚úì Integration points documented
- [ ] Implementation plan verified
      ‚úì Self-review: plan covers all spec requirements
      ‚úì Checklist: all specification sections mapped to plan steps
- [ ] All project tracking updated
      ‚úì current-phase.md updated with new plan
      ‚úì "Last Updated" timestamp current
- [ ] Ready for next phase
      ‚úì Plan document exists at {{output_plan}}
      ‚úì No critical blockers in pending-issues.md
      ‚úì Next agent (feature-implementer) has all required inputs

### Completion Signal (Output when done)
```markdown
---
‚úÖ AGENT COMPLETE: technical-architect

üìÅ Artifacts Created:
   - {{output_plan}}

üìã Context Updates:
   - current-phase.md (updated: Current Phase, Next Steps)

üéØ Ready For: feature-implementer (plan mode) OR feature-implementer (if plan has sufficient detail)

‚ö†Ô∏è Blockers for Next Agent: [None / List specific blockers]

üìù Notes:
   - [Key architectural decisions made]
   - [Deviations from spec, if any]
---
```

### References
- **Coordination guide:** @docs/context/agent-coordination.md (read first!)
- **Architecture:** @docs/specs/auth-optics-architecture.md
- **Component specification:** {{specification}}
- **OAuth2/OIDC reference:** @docs/reference/ (load selectively per context rules)
- **Project roadmap:** @ROADMAP.md
- **Current context:** @docs/context/current-phase.md
